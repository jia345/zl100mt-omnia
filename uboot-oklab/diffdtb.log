6,7c6,7
< 	model = "ZL100MT";
< 	compatible = "huizhi,zl100mt", "marvell,armada385", "marvell,armada380";
---
> 	model = "Turris Omnia";
> 	compatible = "marvell,armada385", "marvell,armada380";
10c10
< 		bootargs = "earlyprintk console=ttyS0,115200";
---
> 		bootargs = "console=ttyS0,115200";
118,124d117
< 			timer@c200 {
< 				compatible = "arm,cortex-a9-global-timer";
< 				reg = <0xc200 0x20>;
< 				interrupts = <0x1 0xb 0x301>;
< 				clocks = <0x4 0x2>;
< 			};
< 
137a131
> 				linux,phandle = <0x3>;
140a135,180
> 			spi@10600 {
> 				compatible = "marvell,armada-380-spi", "marvell,orion-spi";
> 				reg = <0x10600 0x50>;
> 				#address-cells = <0x1>;
> 				#size-cells = <0x0>;
> 				cell-index = <0x0>;
> 				interrupts = <0x0 0x1 0x4>;
> 				clocks = <0x4 0x0>;
> 				status = "okay";
> 
> 				spi-nor@0 {
> 					compatible = "spansion,s25fl256l", "jedec,spi-nor";
> 					#address-cells = <0x1>;
> 					#size-cells = <0x1>;
> 					reg = <0x0>;
> 					spi-max-frequency = <0x2625a00>;
> 
> 					partition@0 {
> 						reg = <0x0 0x100000>;
> 						label = "U-Boot";
> 					};
> 
> 					partition@1 {
> 						reg = <0x100000 0x700000>;
> 						label = "Rescue system";
> 					};
> 				};
> 
> 				spidev@2 {
> 					spi-max-frequency = <0xf4240>;
> 					reg = <0x2>;
> 					compatible = "linux,spidev";
> 				};
> 			};
> 
> 			spi@10680 {
> 				compatible = "marvell,armada-380-spi", "marvell,orion-spi";
> 				reg = <0x10680 0x50>;
> 				#address-cells = <0x1>;
> 				#size-cells = <0x0>;
> 				cell-index = <0x1>;
> 				interrupts = <0x0 0x3f 0x4>;
> 				clocks = <0x4 0x0>;
> 				status = "disabled";
> 			};
> 
142c182
< 				compatible = "marvell,mv78230-a0-i2c", "marvell,mv64xxx-i2c";
---
> 				compatible = "marvell,mv64xxx-i2c";
151a192
> 				clock-frequency = <0x186a0>;
154c195
< 					compatible = "atmel,24c64";
---
> 					compatible = "at,24c64";
160c201
< 				compatible = "marvell,mv78230-a0-i2c", "marvell,mv64xxx-i2c";
---
> 				compatible = "marvell,mv64xxx-i2c";
171c212
< 				compatible = "marvell,armada-38x-uart";
---
> 				compatible = "snps,dw-apb-uart";
183c224
< 				compatible = "marvell,armada-38x-uart";
---
> 				compatible = "snps,dw-apb-uart";
189c230,232
< 				status = "disabled";
---
> 				status = "okay";
> 				pinctrl-names = "default";
> 				pinctrl-0 = <0x7>;
199c242,243
< 					phandle = <0x9>;
---
> 					linux,phandle = <0xb>;
> 					phandle = <0xb>;
204a249
> 					linux,phandle = <0xa>;
210a256
> 					linux,phandle = <0x5>;
217d262
< 					phandle = <0xb>;
233d277
< 					phandle = <0x14>;
241,250d284
< 				nand-pins {
< 					marvell,pins = "mpp22", "mpp34", "mpp23", "mpp33", "mpp38", "mpp28", "mpp40", "mpp42", "mpp35", "mpp36", "mpp25", "mpp30", "mpp32";
< 					marvell,function = "dev";
< 				};
< 
< 				nand-rb {
< 					marvell,pins = "mpp41";
< 					marvell,function = "nand";
< 				};
< 
253a288
> 					linux,phandle = <0x6>;
259a295,296
> 					linux,phandle = <0x7>;
> 					phandle = <0x7>;
265d301
< 					phandle = <0x12>;
288,289c324,325
< 				lte_zw_reset_pins {
< 					marvell,pins = "mpp34";
---
> 				user-pin {
> 					marvell,pins = "mpp18", "mpp33", "mpp34", "mpp35", "mpp36", "mpp42", "mpp44", "mpp47", "mpp51", "mpp56";
292,303d327
< 
< 				spi0cs0-pins {
< 					marvell,pins = "mpp25";
< 					marvell,function = "spi0";
< 					phandle = <0x15>;
< 				};
< 
< 				spi0cs2-pins {
< 					marvell,pins = "mpp26";
< 					marvell,function = "spi0";
< 					phandle = <0x16>;
< 				};
307,309c331,332
< 				compatible = "marvell,armada-370-gpio", "marvell,orion-gpio";
< 				reg = <0x18100 0x40 0x181c0 0x8>;
< 				reg-names = "gpio", "pwm";
---
> 				compatible = "marvell,orion-gpio";
> 				reg = <0x18100 0x40>;
313d335
< 				#pwm-cells = <0x2>;
317d338
< 				clocks = <0x4 0x0>;
321,323c342,343
< 				compatible = "marvell,armada-370-gpio", "marvell,orion-gpio";
< 				reg = <0x18140 0x40 0x181c8 0x8>;
< 				reg-names = "gpio", "pwm";
---
> 				compatible = "marvell,orion-gpio";
> 				reg = <0x18140 0x40>;
327d346
< 				#pwm-cells = <0x2>;
331,332c350,351
< 				clocks = <0x4 0x0>;
< 				phandle = <0x13>;
---
> 				linux,phandle = <0x11>;
> 				phandle = <0x11>;
345c364,365
< 				phandle = <0x8>;
---
> 				linux,phandle = <0x9>;
> 				phandle = <0x9>;
351a372
> 				linux,phandle = <0x4>;
354a376,384
> 			clock-complex@18700 {
> 				compatible = "marvell,armada-380-cpu-clock", "marvell,armada-xp-cpu-clock";
> 				reg = <0x18700 0xa0 0x1c054 0x40 0xe4260 0x8>;
> 				clocks = <0x4 0x1>;
> 				#clock-cells = <0x1>;
> 				linux,phandle = <0x10>;
> 				phandle = <0x10>;
> 			};
> 
357c387,388
< 				reg = <0x20000 0x100 0x20180 0x20 0x20250 0x8>;
---
> 				reg = <0x20000 0x100 0x20180 0x20>;
> 				linux,phandle = <0x2>;
368a400
> 				linux,phandle = <0x1>;
376c408
< 				clocks = <0x4 0x2 0x7>;
---
> 				clocks = <0x4 0x2 0x8>;
383c415
< 				clocks = <0x4 0x2 0x7>;
---
> 				clocks = <0x4 0x2 0x8>;
407,423d438
< 			ethernet@70000 {
< 				compatible = "marvell,armada-370-neta";
< 				reg = <0x70000 0x4000>;
< 				interrupts-extended = <0x1 0x8>;
< 				clocks = <0x8 0x4>;
< 				tx-csum-limit = <0x2648>;
< 				status = "okay";
< 				pinctrl-names = "default";
< 				pinctrl-0 = <0x9>;
< 				phy-mode = "rgmii";
< 
< 				fixed-link {
< 					speed = <0x3e8>;
< 					full-duplex;
< 				};
< 			};
< 
428c443
< 				clocks = <0x8 0x3>;
---
> 				clocks = <0x9 0x3>;
430d444
< 				pinctrl-names = "default";
432,433c446
< 				phy-mode = "rgmii";
< 				phandle = <0xc>;
---
> 				phy-mode = "rgmii-id";
445,447c458,459
< 				clocks = <0x8 0x2>;
< 				status = "okay";
< 				phy-mode = "sgmii";
---
> 				clocks = <0x9 0x2>;
> 				status = "disabled";
454c466
< 				clocks = <0x8 0x12>;
---
> 				clocks = <0x9 0x12>;
461c473
< 				clocks = <0x8 0x16>;
---
> 				clocks = <0x9 0x16>;
481c493
< 				clocks = <0x8 0x1c>;
---
> 				clocks = <0x9 0x1c>;
497a510,525
> 			ethernet@70000 {
> 				compatible = "marvell,armada-370-neta";
> 				reg = <0x70000 0x4000>;
> 				interrupts-extended = <0x1 0x8>;
> 				clocks = <0x9 0x4>;
> 				tx-csum-limit = <0x2648>;
> 				status = "okay";
> 				pinctrl-0 = <0xb>;
> 				phy-mode = "rgmii-id";
> 
> 				fixed-link {
> 					speed = <0x3e8>;
> 					full-duplex;
> 				};
> 			};
> 
503,505c531
< 				clocks = <0x8 0x4>;
< 				pinctrl-names = "default";
< 				pinctrl-0 = <0xb>;
---
> 				clocks = <0x9 0x4>;
507,556c533,534
< 
< 				switch@0 {
< 					compatible = "marvell,mv88e6085";
< 					#address-cells = <0x1>;
< 					#size-cells = <0x0>;
< 					dsa,member = <0x0 0x0>;
< 					reg = <0x0>;
< 
< 					ports {
< 						#address-cells = <0x1>;
< 						#size-cells = <0x0>;
< 
< 						ports@0 {
< 							reg = <0x0>;
< 							label = "lan0";
< 						};
< 
< 						ports@1 {
< 							reg = <0x1>;
< 							label = "lan1";
< 						};
< 
< 						ports@2 {
< 							reg = <0x2>;
< 							label = "lan2";
< 						};
< 
< 						ports@3 {
< 							reg = <0x3>;
< 							label = "lan3";
< 						};
< 
< 						ports@4 {
< 							reg = <0x4>;
< 							label = "lan4";
< 						};
< 
< 						ports@5 {
< 							reg = <0x5>;
< 							label = "cpu";
< 							ethernet = <0xc>;
< 							phy-mode = "rgmii-id";
< 
< 							fixed-link {
< 								speed = <0x3e8>;
< 								full-duplex;
< 							};
< 						};
< 					};
< 				};
---
> 				linux,phandle = <0x12>;
> 				phandle = <0x12>;
564c542
< 				clocks = <0x8 0x17 0x8 0x15 0x8 0xe 0x8 0x10>;
---
> 				clocks = <0x9 0x17 0x9 0x15 0x9 0xe 0x9 0x10>;
566c544
< 				marvell,crypto-srams = <0xd 0xe>;
---
> 				marvell,crypto-srams = <0xc 0xd>;
581c559
< 				clocks = <0x8 0xf>;
---
> 				clocks = <0x9 0xf>;
585,592d562
< 			bm@c8000 {
< 				compatible = "marvell,armada-380-neta-bm";
< 				reg = <0xc8000 0xac>;
< 				clocks = <0x8 0xd>;
< 				internal-mem = <0xf>;
< 				status = "disabled";
< 			};
< 
597c567
< 				clocks = <0x8 0x1e>;
---
> 				clocks = <0x9 0x1e>;
605c575
< 				clocks = <0x10>;
---
> 				clocks = <0xe>;
607c577,578
< 				phandle = <0x11>;
---
> 				linux,phandle = <0xf>;
> 				phandle = <0xf>;
612c583
< 				reg = <0xe4078 0x4 0xe4070 0x8>;
---
> 				reg = <0xe4078 0x4 0xe4074 0x4>;
616,617c587,588
< 			nand-controller@d0000 {
< 				compatible = "marvell,armada370-nand-controller";
---
> 			flash@d0000 {
> 				compatible = "marvell,armada370-nand";
620c591
< 				#size-cells = <0x0>;
---
> 				#size-cells = <0x1>;
622c593
< 				clocks = <0x11 0x0>;
---
> 				clocks = <0xf 0x0>;
631c602
< 				clocks = <0x8 0x11>;
---
> 				clocks = <0x9 0x11>;
634,635d604
< 				pinctrl-names = "default";
< 				pinctrl-0 = <0x12>;
639d607
< 				cd-gpios = <0x13 0x13 0x1>;
646c614
< 				clocks = <0x8 0x9>;
---
> 				clocks = <0x9 0x9>;
654c622
< 				clocks = <0x8 0xa>;
---
> 				clocks = <0x9 0xa>;
662c630
< 			clocks = <0x8 0x17>;
---
> 			clocks = <0x9 0x17>;
666c634,635
< 			phandle = <0xd>;
---
> 			linux,phandle = <0xc>;
> 			phandle = <0xc>;
672c641
< 			clocks = <0x8 0x15>;
---
> 			clocks = <0x9 0x15>;
676,742c645,646
< 			phandle = <0xe>;
< 		};
< 
< 		bm-bppi {
< 			compatible = "mmio-sram";
< 			reg = <0xc040000 0x0 0x100000>;
< 			ranges = <0x0 0xc040000 0x0 0x100000>;
< 			#address-cells = <0x1>;
< 			#size-cells = <0x1>;
< 			clocks = <0x8 0xd>;
< 			no-memory-wc;
< 			status = "disabled";
< 			phandle = <0xf>;
< 		};
< 
< 		spi@10600 {
< 			compatible = "marvell,armada-380-spi", "marvell,orion-spi";
< 			reg = <0xf0010000 0x10600 0x50>;
< 			#address-cells = <0x1>;
< 			#size-cells = <0x0>;
< 			cell-index = <0x0>;
< 			interrupts = <0x0 0x1 0x4>;
< 			clocks = <0x4 0x0>;
< 			status = "okay";
< 			pinctrl-names = "default";
< 			pinctrl-0 = <0x14 0x15 0x16>;
< 
< 			spi-nor@0 {
< 				compatible = "spansion,s25fl256k", "jedec,spi-nor";
< 				#address-cells = <0x1>;
< 				#size-cells = <0x1>;
< 				reg = <0x0>;
< 				spi-max-frequency = <0x2625a00>;
< 
< 				partitions {
< 					compatible = "fixed-partitions";
< 					#address-cells = <0x1>;
< 					#size-cells = <0x1>;
< 
< 					partition@0 {
< 						reg = <0x0 0x100000>;
< 						label = "U-Boot";
< 					};
< 
< 					partition@100000 {
< 						reg = <0x100000 0x700000>;
< 						label = "Rescue system";
< 					};
< 				};
< 			};
< 
< 			spi-nand@2 {
< 				compatible = "spi-nand";
< 				reg = <0x2>;
< 				spi-max-frequency = <0x2625a00>;
< 			};
< 		};
< 
< 		spi@10680 {
< 			compatible = "marvell,armada-380-spi", "marvell,orion-spi";
< 			reg = <0xf0010000 0x10680 0x50>;
< 			#address-cells = <0x1>;
< 			#size-cells = <0x0>;
< 			cell-index = <0x1>;
< 			interrupts = <0x0 0x3f 0x4>;
< 			clocks = <0x4 0x0>;
< 			status = "disabled";
---
> 			linux,phandle = <0xd>;
> 			phandle = <0xd>;
745c649
< 		pcie {
---
> 		pcie-controller {
763d666
< 				bus-range = <0x0 0xff>;
768c671
< 				clocks = <0x8 0x8>;
---
> 				clocks = <0x9 0x8>;
780d682
< 				bus-range = <0x0 0xff>;
785c687
< 				clocks = <0x8 0x5>;
---
> 				clocks = <0x9 0x5>;
797d698
< 				bus-range = <0x0 0xff>;
802,803c703,704
< 				clocks = <0x8 0x6>;
< 				status = "disabled";
---
> 				clocks = <0x9 0x6>;
> 				status = "okay";
814d714
< 				bus-range = <0x0 0xff>;
819c719
< 				clocks = <0x8 0x7>;
---
> 				clocks = <0x9 0x7>;
831c731,732
< 			phandle = <0x10>;
---
> 			linux,phandle = <0xe>;
> 			phandle = <0xe>;
838c739,740
< 			phandle = <0x7>;
---
> 			linux,phandle = <0x8>;
> 			phandle = <0x8>;
850a753,755
> 			clocks = <0x10 0x0>;
> 			clock-latency = <0xf4240>;
> 			clock-names = "cpu0";
856a762,764
> 			clocks = <0x10 0x0>;
> 			clock-latency = <0xf4240>;
> 			clock-names = "cpu1";
857a766,787
> 	};
> 
> 	gpio-keys {
> 		compatible = "gpio-keys";
> 		#address-cells = <0x1>;
> 		#size-cells = <0x0>;
> 
> 		button@212 {
> 			label = "mcuint";
> 			linux,code = <0x100>;
> 			gpios = <0x11 0xb 0x1>;
> 			debounce-interval = <0x0>;
> 		};
> 	};
> 
> 	mvsw61xx {
> 		status = "okay";
> 		compatible = "marvell,88e6176";
> 		reg = <0x0>;
> 		mii-bus = <0x12>;
> 		cpu-port-0 = <0x5>;
> 		cpu-port-1 = <0x6>;
